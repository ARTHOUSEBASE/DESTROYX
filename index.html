<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>$DESTROYX // v9.1.0-MAINNET | IMAGE ROAST</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.ethers.io/lib/ethers-5.7.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #ffffff;
            --fg: #000000;
            --accent: #0000ff;
            --dim: #666666;
            --border-width: 3px;
            --shadow-offset: 6px;
        }
        
        * { 
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            background: var(--bg);
            color: var(--fg);
            font-family: 'JetBrains Mono', monospace;
            min-height: 100vh;
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 12px;
        }

        @media (min-width: 640px) {
            .container {
                padding: 20px;
            }
        }

        /* Header */
        .header {
            border: var(--border-width) solid var(--fg);
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: var(--shadow-offset) var(--shadow-offset) 0px 0px var(--fg);
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        @media (min-width: 640px) {
            .header {
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
                padding: 20px;
                margin-bottom: 20px;
            }
        }

        .header h1 {
            font-size: 1.5rem;
            font-weight: 800;
            letter-spacing: -2px;
        }

        @media (min-width: 640px) {
            .header h1 {
                font-size: 2rem;
            }
        }

        .blink {
            animation: blink 1s step-end infinite;
        }

        @keyframes blink {
            50% { opacity: 0; }
        }

        /* Wallet Status */
        .wallet-box {
            border: 2px solid var(--fg);
            padding: 10px 15px;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
            word-break: break-all;
        }

        @media (min-width: 640px) {
            .wallet-box {
                font-size: 0.8rem;
                text-align: left;
            }
        }

        .wallet-box:hover {
            background: var(--fg);
            color: var(--bg);
        }

        .wallet-connected {
            background: var(--fg);
            color: var(--bg);
        }

        /* Badges */
        .badge-tier {
            display: inline-block;
            padding: 4px 12px;
            font-size: 0.7rem;
            font-weight: 800;
            border: 2px solid var(--fg);
            margin-left: 8px;
        }

        @media (min-width: 640px) {
            .badge-tier {
                font-size: 0.75rem;
                margin-left: 10px;
            }
        }

        .tier-whale { background: var(--fg); color: var(--bg); }
        .tier-shark { background: #333; color: var(--bg); }
        .tier-fish { background: #666; color: var(--bg); }
        .tier-shrimp { background: #ccc; color: var(--fg); }
        .tier-none { background: var(--bg); color: var(--fg); }

        /* Main Layout */
        .main-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }

        @media (min-width: 768px) {
            .main-grid {
                grid-template-columns: 1fr 300px;
                gap: 20px;
            }
        }

        /* Input Section */
        .input-section {
            border: var(--border-width) solid var(--fg);
            padding: 15px;
            box-shadow: var(--shadow-offset) var(--shadow-offset) 0px 0px var(--fg);
        }

        @media (min-width: 640px) {
            .input-section {
                padding: 20px;
            }
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 15px;
        }

        @media (min-width: 640px) {
            .input-group {
                flex-direction: row;
            }
        }

        input[type="text"] {
            flex: 1;
            background: #fff;
            border: var(--border-width) solid var(--fg);
            color: var(--fg);
            padding: 12px 16px;
            font-family: inherit;
            font-size: 1rem;
            outline: none;
            font-weight: bold;
            width: 100%;
        }

        input[type="text"]::placeholder {
            color: #999;
        }

        /* Buttons */
        .btn {
            background: #fff;
            border: var(--border-width) solid var(--fg);
            color: var(--fg);
            padding: 12px 20px;
            font-family: inherit;
            font-weight: 800;
            cursor: pointer;
            text-transform: uppercase;
            transition: all 0.1s;
            box-shadow: 4px 4px 0px 0px var(--fg);
            font-size: 0.85rem;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            width: 100%;
        }

        @media (min-width: 640px) {
            .btn {
                width: auto;
                padding: 12px 24px;
                font-size: 0.9rem;
            }
        }

        .btn:hover {
            background: var(--fg);
            color: #fff;
            transform: translate(-2px, -2px);
            box-shadow: 6px 6px 0px 0px var(--fg);
        }

        .btn:active {
            transform: translate(2px, 2px);
            box-shadow: 2px 2px 0px 0px var(--fg);
        }

        .btn-primary {
            background: var(--fg);
            color: #fff;
        }

        .btn-primary:hover {
            background: #fff;
            color: var(--fg);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: 4px 4px 0px 0px var(--fg) !important;
        }

        .btn-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        @media (min-width: 640px) {
            .btn-group {
                flex-direction: row;
            }
        }

        /* Token Education Box */
        .edu-box {
            border: var(--border-width) solid var(--accent);
            padding: 15px;
            margin-top: 15px;
            background: #f8f8ff;
        }

        .edu-box h4 {
            color: var(--accent);
            margin-bottom: 8px;
            font-size: 0.8rem;
        }

        @media (min-width: 640px) {
            .edu-box h4 {
                font-size: 0.85rem;
            }
        }

        .edu-box p {
            font-size: 0.75rem;
            margin-bottom: 10px;
        }

        @media (min-width: 640px) {
            .edu-box p {
                font-size: 0.8rem;
            }
        }

        .contract-addr {
            font-size: 0.65rem;
            word-break: break-all;
            background: var(--fg);
            color: var(--bg);
            padding: 8px;
            font-weight: bold;
        }

        @media (min-width: 640px) {
            .contract-addr {
                font-size: 0.75rem;
            }
        }

        /* Terminal */
        .terminal {
            border: var(--border-width) solid var(--fg);
            background: #f5f5f5;
            padding: 12px;
            margin-top: 15px;
            min-height: 120px;
            font-size: 0.8rem;
            box-shadow: var(--shadow-offset) var(--shadow-offset) 0px 0px var(--fg);
        }

        @media (min-width: 640px) {
            .terminal {
                padding: 15px;
                min-height: 150px;
                font-size: 0.85rem;
                margin-top: 20px;
            }
        }

        .terminal-line {
            margin-bottom: 4px;
            font-weight: bold;
            word-break: break-all;
        }

        .progress-container {
            margin-top: 15px;
            border: var(--border-width) solid var(--fg);
            padding: 3px;
            background: #fff;
        }

        .progress-bar {
            height: 20px;
            background: var(--fg);
            width: 0%;
            transition: width 0.1s;
        }

        @media (min-width: 640px) {
            .progress-bar {
                height: 24px;
            }
        }

        /* Results */
        .result-card {
            border: var(--border-width) solid var(--fg);
            margin-top: 15px;
            background: #fff;
            box-shadow: var(--shadow-offset) var(--shadow-offset) 0px 0px var(--fg);
        }

        @media (min-width: 640px) {
            .result-card {
                margin-top: 20px;
            }
        }

        .result-header {
            border-bottom: var(--border-width) solid var(--fg);
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
            text-align: center;
        }

        @media (min-width: 640px) {
            .result-header {
                flex-direction: row;
                gap: 20px;
                align-items: center;
                text-align: left;
                padding: 20px;
            }
        }

        .avatar {
            width: 60px;
            height: 60px;
            border: var(--border-width) solid var(--fg);
            filter: grayscale(100%) contrast(120%);
            flex-shrink: 0;
        }

        @media (min-width: 640px) {
            .avatar {
                width: 80px;
                height: 80px;
            }
        }

        .score-box {
            text-align: center;
            width: 100%;
        }

        @media (min-width: 640px) {
            .score-box {
                margin-left: auto;
                text-align: right;
                width: auto;
            }
        }

        .score-number {
            font-size: 2.5rem;
            font-weight: 800;
            line-height: 1;
        }

        @media (min-width: 640px) {
            .score-number {
                font-size: 3rem;
            }
        }

        .score-label {
            font-size: 0.75rem;
            font-weight: bold;
        }

        @media (min-width: 640px) {
            .score-label {
                font-size: 0.8rem;
            }
        }

        /* Brutal Meter */
        .brutal-meter {
            margin: 15px 0;
        }

        .meter-label {
            display: flex;
            justify-content: space-between;
            font-size: 0.7rem;
            margin-bottom: 5px;
            font-weight: bold;
        }

        @media (min-width: 640px) {
            .meter-label {
                font-size: 0.75rem;
            }
        }

        .meter-bar {
            height: 25px;
            border: var(--border-width) solid var(--fg);
            position: relative;
            background: #fff;
        }

        @media (min-width: 640px) {
            .meter-bar {
                height: 30px;
            }
        }

        .meter-fill {
            height: 100%;
            background: var(--fg);
            transition: width 1s ease-out;
        }

        .meter-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-weight: 800;
            font-size: 0.75rem;
            white-space: nowrap;
        }

        @media (min-width: 640px) {
            .meter-text {
                font-size: 0.9rem;
            }
        }

        /* Stamp */
        .stamp {
            display: inline-block;
            border: 4px solid var(--fg);
            padding: 6px 15px;
            font-size: 1.2rem;
            font-weight: 800;
            transform: rotate(-5deg);
            margin-top: 10px;
        }

        @media (min-width: 640px) {
            .stamp {
                font-size: 1.5rem;
                padding: 8px 20px;
            }
        }

        /* Share Box */
        .share-box {
            border: var(--border-width) solid var(--fg);
            padding: 15px;
            margin-top: 15px;
        }

        @media (min-width: 640px) {
            .share-box {
                padding: 20px;
                margin-top: 20px;
            }
        }

        textarea {
            width: 100%;
            background: #f5f5f5;
            border: var(--border-width) solid var(--fg);
            color: var(--fg);
            padding: 12px;
            font-family: inherit;
            font-size: 0.8rem;
            resize: none;
            margin-bottom: 15px;
            font-weight: bold;
        }

        @media (min-width: 640px) {
            textarea {
                font-size: 0.85rem;
            }
        }

        /* History Sidebar */
        .history-box {
            border: var(--border-width) solid var(--fg);
            padding: 12px;
            box-shadow: var(--shadow-offset) var(--shadow-offset) 0px 0px var(--fg);
            max-height: 400px;
            overflow-y: auto;
        }

        @media (min-width: 640px) {
            .history-box {
                padding: 15px;
                max-height: 600px;
            }
        }

        .history-box h3 {
            border-bottom: var(--border-width) solid var(--fg);
            padding-bottom: 10px;
            margin-bottom: 15px;
            font-size: 0.9rem;
        }

        @media (min-width: 640px) {
            .history-box h3 {
                font-size: 1rem;
            }
        }

        .history-item {
            border: 2px solid var(--fg);
            padding: 10px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .history-item:hover {
            background: var(--fg);
            color: var(--bg);
        }

        .history-handle {
            font-weight: 800;
            font-size: 0.85rem;
            word-break: break-all;
        }

        .history-score {
            font-size: 0.75rem;
            margin-top: 4px;
        }

        .history-date {
            font-size: 0.65rem;
            opacity: 0.7;
            margin-top: 4px;
        }

        .clear-history {
            width: 100%;
            margin-top: 10px;
            padding: 8px;
            font-size: 0.7rem;
        }

        @media (min-width: 640px) {
            .clear-history {
                font-size: 0.75rem;
            }
        }

        /* Roast Items */
        .roast-list {
            padding: 15px;
        }

        @media (min-width: 640px) {
            .roast-list {
                padding: 20px;
            }
        }

        .roast-item {
            padding: 12px;
            margin-bottom: 10px;
            border-left: 4px solid var(--fg);
            background: #f5f5f5;
            font-size: 0.85rem;
            font-weight: bold;
            word-break: break-word;
        }

        @media (min-width: 640px) {
            .roast-item {
                padding: 15px;
                margin-bottom: 12px;
                font-size: 0.95rem;
            }
        }

        .roast-item::before {
            content: "> ";
        }

        /* Token Perks */
        .perks-box {
            border: var(--border-width) solid var(--accent);
            padding: 15px;
            margin-top: 15px;
            background: #f8f8ff;
        }

        @media (min-width: 640px) {
            .perks-box {
                margin-top: 20px;
            }
        }

        .perks-box h4 {
            color: var(--accent);
            margin-bottom: 10px;
            font-size: 0.8rem;
        }

        @media (min-width: 640px) {
            .perks-box h4 {
                font-size: 0.85rem;
            }
        }

        .perk-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
            font-size: 0.8rem;
        }

        @media (min-width: 640px) {
            .perk-item {
                font-size: 0.85rem;
            }
        }

        .perk-locked {
            opacity: 0.4;
        }

        .perk-check {
            width: 20px;
            height: 20px;
            border: 2px solid var(--fg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }

        .perk-checked {
            background: var(--fg);
            color: var(--bg);
        }

        /* Footer */
        .footer {
            border-top: var(--border-width) solid var(--fg);
            padding-top: 20px;
            margin-top: 30px;
            font-size: 0.7rem;
            text-align: center;
        }

        @media (min-width: 640px) {
            .footer {
                font-size: 0.75rem;
            }
        }

        .hidden { display: none !important; }

        /* Recent Activity Section */
        .activity-box {
            border: var(--border-width) solid var(--fg);
            padding: 15px;
            margin-top: 15px;
            background: #fff;
            box-shadow: var(--shadow-offset) var(--shadow-offset) 0px 0px var(--fg);
        }

        @media (min-width: 640px) {
            .activity-box {
                padding: 20px;
                margin-top: 20px;
            }
        }

        .activity-item {
            border-left: 3px solid var(--fg);
            padding: 10px 12px;
            margin-bottom: 10px;
            background: #f5f5f5;
            font-size: 0.8rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 8px;
        }

        @media (min-width: 640px) {
            .activity-item {
                padding: 12px 15px;
                font-size: 0.85rem;
            }
        }

        .activity-time {
            font-size: 0.65rem;
            opacity: 0.6;
            font-weight: bold;
        }

        @media (min-width: 640px) {
            .activity-time {
                font-size: 0.7rem;
            }
        }

        /* Builder Info */
        .builder-box {
            border: 2px solid var(--accent);
            padding: 12px;
            margin-top: 15px;
            background: #f0f0ff;
            font-size: 0.75rem;
        }

        @media (min-width: 640px) {
            .builder-box {
                padding: 15px;
                margin-top: 20px;
                font-size: 0.8rem;
            }
        }

        .builder-box a {
            color: var(--accent);
            text-decoration: none;
            font-weight: bold;
        }

        .builder-box a:hover {
            text-decoration: underline;
        }

        /* Roadmap */
        .roadmap-item {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
            font-size: 0.75rem;
            align-items: flex-start;
        }

        @media (min-width: 640px) {
            .roadmap-item {
                font-size: 0.8rem;
            }
        }

        .roadmap-status {
            background: var(--fg);
            color: var(--bg);
            padding: 2px 8px;
            font-weight: bold;
            font-size: 0.65rem;
            white-space: nowrap;
        }

        @media (min-width: 640px) {
            .roadmap-status {
                font-size: 0.7rem;
            }
        }

        .roadmap-status.pending {
            background: #666;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        @media (min-width: 640px) {
            .stats-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        .stat-item {
            border: 2px solid var(--fg);
            padding: 10px;
            text-align: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 800;
        }

        .stat-label {
            font-size: 0.7rem;
            opacity: 0.7;
        }

        /* Live Ticker */
        .ticker {
            border-bottom: 2px solid var(--fg);
            padding: 8px 0;
            margin-bottom: 15px;
            overflow: hidden;
            white-space: nowrap;
            font-size: 0.75rem;
        }

        @media (min-width: 640px) {
            .ticker {
                font-size: 0.8rem;
                margin-bottom: 20px;
            }
        }

        .ticker-content {
            display: inline-block;
            animation: ticker 20s linear infinite;
        }

        @keyframes ticker {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }

        /* Generated Image Card */
        .generated-image-box {
            border: var(--border-width) solid var(--fg);
            padding: 15px;
            margin-top: 15px;
            background: #fff;
            box-shadow: var(--shadow-offset) var(--shadow-offset) 0px 0px var(--fg);
            text-align: center;
        }

        @media (min-width: 640px) {
            .generated-image-box {
                padding: 20px;
                margin-top: 20px;
            }
        }

        .generated-canvas {
            max-width: 100%;
            height: auto;
            border: 3px solid var(--fg);
            background: #fff;
            margin-bottom: 15px;
        }

        .image-actions {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        @media (min-width: 640px) {
            .image-actions {
                flex-direction: row;
                justify-content: center;
            }
        }

        /* Toast */
        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--fg);
            color: var(--bg);
            padding: 12px 24px;
            border: 2px solid var(--fg);
            font-weight: bold;
            font-size: 0.85rem;
            z-index: 1000;
            box-shadow: 4px 4px 0px 0px rgba(0,0,0,0.2);
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { transform: translate(-50%, 100px); opacity: 0; }
            to { transform: translate(-50%, 0); opacity: 1; }
        }

        /* Smooth scroll */
        html {
            scroll-behavior: smooth;
        }

        /* Touch feedback */
        .btn, .history-item, .wallet-box {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }

        /* Loading animation */
        .loading-dots::after {
            content: '';
            animation: dots 1.5s steps(4, end) infinite;
        }

        @keyframes dots {
            0%, 20% { content: ''; }
            40% { content: '.'; }
            60% { content: '..'; }
            80%, 100% { content: '...'; }
        }

        /* Glitch effect for image */
        .glitch-text {
            position: relative;
            display: inline-block;
        }

        /* Feature highlight */
        .feature-new {
            background: var(--fg);
            color: var(--bg);
            padding: 2px 6px;
            font-size: 0.6rem;
            font-weight: bold;
            margin-left: 8px;
            vertical-align: middle;
        }
    </style>
</head>
<body>
    
    <div class="container">
        
        <!-- Live Ticker -->
        <div class="ticker">
            <div class="ticker-content">
                /// $DESTROYX MAINNET LIVE /// CONTRACT: 0x78305eF4299edb868d5fc0bb13B4AAa71cc63ba3 /// BUILT BY @arthousebase /// FREE IMAGE ROAST GENERATOR ENABLED /// X INTEGRATION ACTIVE /// ONCHAIN VERIFICATION ENABLED /// BRUTAL SCORE PROTOCOL v9.1.0 ///
            </div>
        </div>

        <!-- Header -->
        <div class="header">
            <div>
                <h1>$DESTROYX<span class="blink">_</span></h1>
                <div style="font-size: 0.75rem; margin-top: 5px; opacity: 0.8;">
                    v9.1.0-MAINNET | BRUTAL SCORE PROTOCOL
                </div>
                <div style="font-size: 0.65rem; margin-top: 3px; color: var(--accent);">
                    BUILT BY <a href="https://x.com/arthousebase" target="_blank" style="color: var(--accent); text-decoration: underline;">@arthousebase</a> | EVOLVING
                </div>
            </div>
            <div id="wallet-status" class="wallet-box" onclick="connectWallet()">
                [ CONNECT WALLET ]
            </div>
        </div>

        <!-- Builder Info & Roadmap -->
        <div class="builder-box">
            <div style="font-weight: bold; margin-bottom: 8px; color: var(--accent);">[ PROTOCOL_DEVELOPER ]</div>
            <div style="margin-bottom: 10px;">
                Engineered by <a href="https://x.com/arthousebase" target="_blank">@arthousebase</a> â€” Expanding X integration with onchain verification, social graph analysis, and advanced token-gated features.
            </div>
            <div style="font-weight: bold; margin-bottom: 8px; margin-top: 12px;">[ DEVELOPMENT_ROADMAP ]</div>
            <div class="roadmap-item">
                <span class="roadmap-status">LIVE</span>
                <span>Basic X Handle Analysis & Roast Generation</span>
            </div>
            <div class="roadmap-item">
                <span class="roadmap-status">LIVE</span>
                <span>Token-Gated Tier System ($DESTROYX Holdings)</span>
            </div>
            <div class="roadmap-item">
                <span class="roadmap-status">LIVE</span>
                <span>Onchain Wallet Verification & Balance Tracking</span>
            </div>
            <div class="roadmap-item">
                <span class="roadmap-status">LIVE</span>
                <span>FREE Image Roast Avatar Generator <span class="feature-new">NEW</span></span>
            </div>
            <div class="roadmap-item">
                <span class="roadmap-status pending">Q1 2026</span>
                <span>Deep X Social Graph Analysis (Follower Quality, Engagement Metrics)</span>
            </div>
            <div class="roadmap-item">
                <span class="roadmap-status pending">Q1 2026</span>
                <span>Onchain Roast History NFT Minting</span>
            </div>
            <div class="roadmap-item">
                <span class="roadmap-status pending">Q2 2026</span>
                <span>Real-time X Feed Integration for Live Roasting</span>
            </div>
        </div>

        <!-- Recent Activity -->
        <div class="activity-box">
            <h3 style="border-bottom: 2px solid var(--fg); padding-bottom: 10px; margin-bottom: 15px; font-size: 0.9rem;">
                [ RECENT_DESTRUCTION_ACTIVITY ]
            </h3>
            <div id="activity-list">
                <div class="activity-item">
                    <span>> @cryptobro_analyzer roasted | Score: 8.4/10 | Tier: FISH</span>
                    <span class="activity-time">2m ago</span>
                </div>
                <div class="activity-item">
                    <span>> @nft_whale_2024 analyzed | Score: 9.1/10 | Tier: WHALE</span>
                    <span class="activity-time">5m ago</span>
                </div>
                <div class="activity-item">
                    <span>> @degen_trader_x verified | Score: 7.2/10 | Tier: SHARK</span>
                    <span class="activity-time">12m ago</span>
                </div>
                <div class="activity-item">
                    <span>> @meme_coin_hodler destroyed | Score: 6.8/10 | Tier: SHRIMP</span>
                    <span class="activity-time">18m ago</span>
                </div>
                <div class="activity-item">
                    <span>> @base_chain_maxi roasted | Score: 8.9/10 | Tier: FISH</span>
                    <span class="activity-time">24m ago</span>
                </div>
            </div>
        </div>

        <!-- Main Grid -->
        <div class="main-grid">
            
            <!-- Left: Main Content -->
            <div>
                
                <!-- Input -->
                <div class="input-section" id="input-section">
                    <div style="margin-bottom: 10px; font-weight: bold; font-size: 0.9rem;">
                        $ analyze_target --handle --onchain_verify --generate_avatar
                    </div>
                    <div class="input-group">
                        <input 
                            type="text" 
                            id="username" 
                            placeholder="ENTER_X_USERNAME..."
                            autocomplete="off"
                            autocapitalize="off"
                        >
                        <button onclick="execute()" class="btn btn-primary" id="execute-btn">
                            EXECUTE
                        </button>
                    </div>

                    <!-- Token Education -->
                    <div class="edu-box">
                        <h4>[ $DESTROYX_UTILITY_DETECTED ]</h4>
                        <p>
                            Hold <strong>$DESTROYX</strong> to unlock brutal features. 
                            Current tier determines your destruction capabilities and onchain verification level.
                        </p>
                        <div class="contract-addr">
                            BASE MAINNET: 0x78305eF4299edb868d5fc0bb13B4AAa71cc63ba3
                        </div>
                        <div style="margin-top: 10px;">
                            <a href="https://app.uniswap.org/#/swap?outputCurrency=0x78305eF4299edb868d5fc0bb13B4AAa71cc63ba3&chain=base" target="_blank" class="btn" style="font-size: 0.75rem; padding: 8px 16px; width: 100%;">
                                [ ACQUIRE_TOKENS_ON_BASE ]
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Terminal -->
                <div id="terminal" class="terminal hidden">
                    <div id="terminal-output"></div>
                    <div class="progress-container">
                        <div id="progress" class="progress-bar"></div>
                    </div>
                </div>

                <!-- Results -->
                <div id="results" class="hidden">
                    
                    <!-- Profile Card -->
                    <div class="result-card">
                        <div class="result-header">
                            <img id="avatar" src="" class="avatar" alt="target">
                            <div style="flex: 1; min-width: 0;">
                                <div style="font-size: 1.4rem; font-weight: 800; word-break: break-all;" id="display-name"></div>
                                <div id="handle-display" style="opacity: 0.6; font-size: 0.85rem;"></div>
                                <div id="user-badge" style="margin-top: 8px;"></div>
                                <div id="onchain-badge" style="margin-top: 5px; font-size: 0.7rem; color: var(--accent);"></div>
                            </div>
                            <div class="score-box">
                                <div class="score-number" id="score-num">0.0</div>
                                <div class="score-label">BRUTAL SCORE</div>
                                <div class="stamp">ROASTED</div>
                            </div>
                        </div>

                        <!-- Brutal Meter -->
                        <div style="padding: 15px; border-bottom: var(--border-width) solid var(--fg);">
                            <div class="brutal-meter">
                                <div class="meter-label">
                                    <span>MILD</span>
                                    <span>TERMINAL</span>
                                </div>
                                <div class="meter-bar">
                                    <div class="meter-fill" id="meter-fill" style="width: 0%"></div>
                                    <div class="meter-text" id="meter-text">ANALYZING...</div>
                                </div>
                            </div>
                        </div>

                        <!-- Onchain Verification Status -->
                        <div id="verification-status" style="padding: 12px 15px; border-bottom: 2px solid var(--fg); background: #f8f8f8; font-size: 0.8rem;">
                            <strong>[ ONCHAIN_VERIFICATION ]</strong> <span id="verify-text">Pending wallet connection...</span>
                        </div>

                        <!-- Roasts -->
                        <div class="roast-list" id="roast-container"></div>
                    </div>

                    <!-- Generated Image Card - FREE FEATURE -->
                    <div class="generated-image-box" id="image-box">
                        <h4 style="margin-bottom: 15px; font-size: 0.9rem; text-align: left;">
                            [ GENERATED_ROAST_AVATAR ] <span class="feature-new">FREE</span>
                        </h4>
                        <canvas id="roastCanvas" class="generated-canvas" width="800" height="800"></canvas>
                        <div class="image-actions">
                            <button onclick="downloadImage()" class="btn btn-primary">
                                [ DOWNLOAD_AVATAR ]
                            </button>
                            <button onclick="regenerateImage()" class="btn">
                                [ REGENERATE ]
                            </button>
                        </div>
                        <p style="margin-top: 10px; font-size: 0.7rem; opacity: 0.7; text-align: left;">
                            * Generated locally using HTML5 Canvas. No external API calls. 100% free & private.
                        </p>
                    </div>

                    <!-- Token Perks Status -->
                    <div class="perks-box" id="perks-status">
                        <h4>[ YOUR_DESTRUCTION_CAPABILITIES ]</h4>
                        <div id="perk-list"></div>
                    </div>

                    <!-- Share -->
                    <div class="share-box">
                        <h4 style="margin-bottom: 10px; font-size: 0.85rem;">[ EXPORT_EVIDENCE ]</h4>
                        <textarea id="share-buffer" rows="4" readonly></textarea>
                        <div class="btn-group">
                            <button onclick="copyText()" class="btn">[ COPY_TEXT ]</button>
                            <a id="tweet-btn" href="#" target="_blank" class="btn btn-primary">[ POST_TO_X ]</a>
                        </div>
                    </div>

                    <button onclick="reset()" class="btn w-full" style="margin-top: 15px;">
                        [ ANALYZE_ANOTHER_TARGET ]
                    </button>
                </div>

            </div>

            <!-- Right: Sidebar -->
            <div>
                <!-- History -->
                <div class="history-box">
                    <h3>[ DESTRUCTION_LOG ]</h3>
                    <div id="history-list">
                        <div style="opacity: 0.5; font-size: 0.8rem;">
                            No targets analyzed yet...
                        </div>
                    </div>
                    <button onclick="clearHistory()" class="btn clear-history hidden" id="clear-btn">
                        [ CLEAR_LOG ]
                    </button>
                </div>

                <!-- Quick Stats -->
                <div class="history-box" style="margin-top: 15px;">
                    <h3>[ PROTOCOL_STATS ]</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-value" id="total-roasted">0</div>
                            <div class="stat-label">TOTAL ROASTED</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="avg-brutality">0.0</div>
                            <div class="stat-label">AVG BRUTALITY</div>
                        </div>
                    </div>
                    <div style="margin-top: 12px; padding-top: 12px; border-top: 2px solid var(--fg);">
                        <div style="font-size: 0.8rem; margin-bottom: 5px;">
                            <strong>Your Tier:</strong>
                            <span id="your-tier" class="badge-tier tier-none">NOT_CONNECTED</span>
                        </div>
                        <div style="font-size: 0.75rem; opacity: 0.8;">
                            Balance: <span id="your-balance">0</span> $DESTROYX
                        </div>
                    </div>
                </div>

                <!-- X Integration Status -->
                <div class="history-box" style="margin-top: 15px; background: #f0f0ff;">
                    <h3 style="color: var(--accent);">[ X_INTEGRATION ]</h3>
                    <div style="font-size: 0.8rem;">
                        <div style="margin-bottom: 8px; display: flex; align-items: center; gap: 8px;">
                            <span style="color: green; font-weight: bold;">âœ“</span>
                            <span>Handle Resolution</span>
                        </div>
                        <div style="margin-bottom: 8px; display: flex; align-items: center; gap: 8px;">
                            <span style="color: green; font-weight: bold;">âœ“</span>
                            <span>Avatar Fetching</span>
                        </div>
                        <div style="margin-bottom: 8px; display: flex; align-items: center; gap: 8px;">
                            <span style="color: green; font-weight: bold;">âœ“</span>
                            <span>Social Signal Analysis</span>
                        </div>
                        <div style="margin-bottom: 8px; display: flex; align-items: center; gap: 8px;">
                            <span style="color: green; font-weight: bold;">âœ“</span>
                            <span>Image Roast Generator <span class="feature-new">NEW</span></span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px; opacity: 0.5;">
                            <span style="font-weight: bold;">â—‹</span>
                            <span>Deep Graph Analysis (Soon)</span>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <!-- Footer -->
        <div class="footer">
            <div style="margin-bottom: 10px; font-weight: bold;">
                $DESTROYX_PROTOCOL // BASE MAINNET // 2026
            </div>
            <div style="margin-bottom: 10px; font-size: 0.65rem; opacity: 0.8;">
                Developed by <a href="https://x.com/arthousebase" target="_blank" style="color: var(--fg); text-decoration: underline;">@arthousebase</a> | 
                <a href="https://x.com/search?q=%24DESTROYX" target="_blank" style="color: var(--fg); text-decoration: underline;">Follow $DESTROYX</a>
            </div>
            <div class="contract-addr" style="display: inline-block; font-size: 0.6rem;">
                0x78305eF4299edb868d5fc0bb13B4AAa71cc63ba3
            </div>
        </div>

    </div>

    <script>
        // CONFIG
        const TOKEN_CONTRACT = "0x78305eF4299edb868d5fc0bb13B4AAa71cc63ba3";
        const TOKEN_ABI = [
            "function balanceOf(address owner) view returns (uint256)",
            "function decimals() view returns (uint8)",
            "function symbol() view returns (string)"
        ];
        const BASE_RPC = "https://mainnet.base.org";

        // STATE
        let provider, signer, userAddress, userBalance = 0;
        let currentResult = null;
        let isConnected = false;
        let currentRoastData = null;

        // ROAST DATABASE - Enhanced for X integration
        const roastDB = [
            "Username archaeology: 'Fashionably late to the internet' energy. Not early adopter, just... timing.",
            "Thread enthusiast: 15 tweets to convey 2 sentences. Efficiency not found.",
            "Reply velocity suspicious: Either very dedicated or very unemployed.",
            "Engagement bait strategy: 'Drop your color' followed by void. One-way community.",
            "Crypto commentary: 'Up' then 'Down' within hours. Weather app more accurate.",
            "GM protocol: Military-grade routine. Variation: absolute zero.",
            "Quote tweet art: 'ðŸ‘€' constitutes curation. Gallery: pending.",
            "Follower math: Count vs engagement doesn't compute. Audience: classified.",
            "Bio disclaimer: 'Thoughts my own' â€” good, 0% market demand elsewhere.",
            "3AM activity detected: Sleep sacrificed for... this. Commitment: absolute.",
            "Hashtag strategy: Quantity over quality. Dignity: deprecated.",
            "Meme freshness: Expired. Effort: acknowledged. Viral: recalculating.",
            "Platform loyalty: Stockholm levels. Complaints: frequent. Departure: never.",
            "Digital legacy: Extensive footprint, uncertain impact. Server costs: externalized.",
            "Existential status: Here for good time, possibly long time. Timeline: TBD.",
            "X Premium subscriber detected: Paying to be heard by no one. ROI: undefined.",
            "Pinned tweet from 2022: Peak performance captured. Decline: documented.",
            "Spaces participation: Silent listener #3472. Contribution: atmospheric.",
            "Blue check analysis: Purchased, not earned. Authority: self-certified.",
            "Following-to-follower ratio: Desperation quantified. Dignity: liquidated."
        ];

        // TIER CONFIG
        const TIERS = [
            { min: 10000, label: "WHALE", class: "tier-whale", perks: ["Image Card", "Deep Analysis", "Priority Queue", "Custom Message", "Onchain NFT Mint", "HD Avatar Export"] },
            { min: 1000, label: "SHARK", class: "tier-shark", perks: ["Image Card", "Deep Analysis", "Priority Queue", "Onchain Verification", "Avatar Export"] },
            { min: 100, label: "FISH", class: "tier-fish", perks: ["Deep Analysis", "Onchain Verification", "Avatar Export"] },
            { min: 1, label: "SHRIMP", class: "tier-shrimp", perks: ["Basic Analysis", "Onchain Verification", "Avatar Export"] },
            { min: 0, label: "NONE", class: "tier-none", perks: ["Basic Analysis", "Avatar Export"] }
        ];

        // ACTIVITY SIMULATION
        const activityData = [
            { user: "cryptobro_analyzer", score: "8.4", tier: "FISH", time: "2m" },
            { user: "nft_whale_2024", score: "9.1", tier: "WHALE", time: "5m" },
            { user: "degen_trader_x", score: "7.2", tier: "SHARK", time: "12m" },
            { user: "meme_coin_hodler", score: "6.8", tier: "SHRIMP", time: "18m" },
            { user: "base_chain_maxi", score: "8.9", tier: "FISH", time: "24m" }
        ];

        // INIT
        window.addEventListener('load', () => {
            loadHistory();
            updateStats();
            simulateLiveActivity();
            
            // Check if wallet was previously connected
            if (window.ethereum && window.ethereum.selectedAddress) {
                connectWallet();
            }
        });

        // Simulate live activity updates
        function simulateLiveActivity() {
            setInterval(() => {
                const activities = document.querySelectorAll('.activity-item');
                const randomActivity = activityData[Math.floor(Math.random() * activityData.length)];
                const newTime = Math.floor(Math.random() * 30) + 1;
                
                // Shift and add new
                const list = document.getElementById('activity-list');
                const first = list.firstElementChild;
                if (first) first.remove();
                
                const div = document.createElement('div');
                div.className = 'activity-item';
                div.innerHTML = `
                    <span>> @${randomActivity.user} roasted | Score: ${randomActivity.score}/10 | Tier: ${randomActivity.tier}</span>
                    <span class="activity-time">${newTime}m ago</span>
                `;
                list.appendChild(div);
            }, 30000); // Update every 30 seconds
        }

        // WALLET CONNECT
        async function connectWallet() {
            if (!window.ethereum) {
                alert("Install MetaMask or compatible wallet to enable onchain features");
                return;
            }

            try {
                provider = new ethers.providers.Web3Provider(window.ethereum, {
                    name: 'base',
                    chainId: 8453
                });
                
                await provider.send("eth_requestAccounts", []);
                signer = provider.getSigner();
                userAddress = await signer.getAddress();
                
                // Check if on Base
                const network = await provider.getNetwork();
                if (network.chainId !== 8453) {
                    try {
                        await window.ethereum.request({
                            method: 'wallet_switchEthereumChain',
                            params: [{ chainId: '0x2105' }] // Base mainnet
                        });
                    } catch (switchError) {
                        console.log("Network switch failed or rejected");
                    }
                }
                
                await checkBalance();
                isConnected = true;
                updateWalletUI();
                updateVerificationStatus();
            } catch (err) {
                console.error("Connection error:", err);
                alert("Wallet connection failed. Please try again.");
            }
        }

        // CHECK BALANCE
        async function checkBalance() {
            try {
                const token = new ethers.Contract(TOKEN_CONTRACT, TOKEN_ABI, provider);
                const balance = await token.balanceOf(userAddress);
                const decimals = await token.decimals();
                userBalance = parseFloat(ethers.utils.formatUnits(balance, decimals));
            } catch (err) {
                console.error("Balance check failed:", err);
                userBalance = 0;
            }
        }

        // GET TIER
        function getTier(balance) {
            for (const tier of TIERS) {
                if (balance >= tier.min) return tier;
            }
            return TIERS[TIERS.length - 1];
        }

        // UPDATE UI
        function updateWalletUI() {
            const tier = getTier(userBalance);
            const walletBox = document.getElementById('wallet-status');
            
            walletBox.innerHTML = `
                <div>${userAddress.slice(0, 6)}...${userAddress.slice(-4)}</div>
                <div style="margin-top: 4px;">
                    <span class="badge-tier ${tier.class}">${tier.label}</span>
                    <span style="font-size: 0.7rem; margin-left: 8px;">${userBalance.toLocaleString()} $DESTROYX</span>
                </div>
            `;
            walletBox.classList.add('wallet-connected');

            document.getElementById('your-tier').className = `badge-tier ${tier.class}`;
            document.getElementById('your-tier').textContent = tier.label;
            document.getElementById('your-balance').textContent = userBalance.toLocaleString();
        }

        // UPDATE VERIFICATION STATUS
        function updateVerificationStatus() {
            const statusEl = document.getElementById('verify-text');
            if (!statusEl) return;
            
            if (isConnected) {
                const tier = getTier(userBalance);
                statusEl.innerHTML = `<span style="color: green; font-weight: bold;">âœ“ VERIFIED</span> | Tier: ${tier.label} | Balance: ${userBalance.toLocaleString()} $DESTROYX`;
            } else {
                statusEl.textContent = "Connect wallet for onchain verification";
            }
        }

        // GENERATE ROAST IMAGE - FREE USING CANVAS
        function generateRoastImage(username, score, tier, roasts, avatarUrl) {
            const canvas = document.getElementById('roastCanvas');
            const ctx = canvas.getContext('2d');
            
            // Clear canvas
            ctx.fillStyle = '#ffffff';
            ctx.fillRect(0, 0, 800, 800);
            
            // Border
            ctx.strokeStyle = '#000000';
            ctx.lineWidth = 12;
            ctx.strokeRect(0, 0, 800, 800);
            
            // Inner border
            ctx.lineWidth = 4;
            ctx.strokeRect(20, 20, 760, 760);
            
            // Load avatar image
            const img = new Image();
            img.crossOrigin = "anonymous";
            img.onload = function() {
                // Draw avatar circle background
                ctx.beginPath();
                ctx.arc(400, 140, 90, 0, Math.PI * 2);
                ctx.fillStyle = '#000000';
                ctx.fill();
                ctx.lineWidth = 6;
                ctx.stroke();
                
                // Clip and draw avatar
                ctx.save();
                ctx.beginPath();
                ctx.arc(400, 140, 80, 0, Math.PI * 2);
                ctx.clip();
                ctx.drawImage(img, 320, 60, 160, 160);
                ctx.restore();
                
                // Draw border around avatar
                ctx.beginPath();
                ctx.arc(400, 140, 85, 0, Math.PI * 2);
                ctx.lineWidth = 4;
                ctx.strokeStyle = '#000000';
                ctx.stroke();
                
                finalizeImage();
            };
            
            img.onerror = function() {
                // Draw placeholder if avatar fails
                ctx.fillStyle = '#cccccc';
                ctx.beginPath();
                ctx.arc(400, 140, 80, 0, Math.PI * 2);
                ctx.fill();
                ctx.fillStyle = '#000000';
                ctx.font = 'bold 60px JetBrains Mono';
                ctx.textAlign = 'center';
                ctx.fillText('?', 400, 160);
                finalizeImage();
            };
            
            img.src = avatarUrl;
            
            function finalizeImage() {
                // Title
                ctx.fillStyle = '#000000';
                ctx.font = 'bold 48px JetBrains Mono';
                ctx.textAlign = 'center';
                ctx.fillText('$DESTROYX ANALYSIS', 400, 280);
                
                // Username
                ctx.font = 'bold 36px JetBrains Mono';
                ctx.fillText(`@${username.toUpperCase()}`, 400, 330);
                
                // Score Box
                ctx.fillStyle = '#000000';
                ctx.fillRect(250, 360, 300, 100);
                ctx.fillStyle = '#ffffff';
                ctx.font = 'bold 72px JetBrains Mono';
                ctx.fillText(score, 400, 430);
                ctx.font = 'bold 20px JetBrains Mono';
                ctx.fillText('BRUTAL SCORE', 400, 455);
                
                // Tier Badge
                ctx.fillStyle = '#0000ff';
                ctx.fillRect(320, 480, 160, 40);
                ctx.fillStyle = '#ffffff';
                ctx.font = 'bold 24px JetBrains Mono';
                ctx.fillText(tier, 400, 508);
                
                // Status Label
                ctx.fillStyle = '#000000';
                ctx.font = 'bold 28px JetBrains Mono';
                const status = getBrutalLabel(parseFloat(score));
                ctx.fillText(status, 400, 560);
                
                // Roasts section
                ctx.font = 'bold 18px JetBrains Mono';
                ctx.textAlign = 'left';
                let yPos = 610;
                
                roasts.slice(0, 3).forEach((roast, i) => {
                    // Truncate roast if too long
                    let displayRoast = roast;
                    if (displayRoast.length > 55) {
                        displayRoast = displayRoast.substring(0, 52) + '...';
                    }
                    
                    ctx.fillStyle = '#000000';
                    ctx.fillText(`>${i + 1} ${displayRoast}`, 50, yPos);
                    yPos += 35;
                });
                
                // Footer
                ctx.fillStyle = '#666666';
                ctx.font = '14px JetBrains Mono';
                ctx.textAlign = 'center';
                ctx.fillText('Generated by $DESTROYX Protocol | @arthousebase', 400, 770);
                
                // ROASTED Stamp
                ctx.save();
                ctx.translate(650, 650);
                ctx.rotate(-15 * Math.PI / 180);
                ctx.strokeStyle = '#000000';
                ctx.lineWidth = 8;
                ctx.strokeRect(-80, -30, 160, 60);
                ctx.fillStyle = '#000000';
                ctx.font = 'bold 32px JetBrains Mono';
                ctx.fillText('ROASTED', 0, 10);
                ctx.restore();
                
                // Glitch effect lines
                for (let i = 0; i < 5; i++) {
                    ctx.fillStyle = i % 2 === 0 ? '#000000' : '#ffffff';
                    ctx.fillRect(0, Math.random() * 800, 800, 2);
                }
            }
        }

        function regenerateImage() {
            if (currentRoastData) {
                generateRoastImage(
                    currentRoastData.username,
                    currentRoastData.score,
                    currentRoastData.tier,
                    currentRoastData.roasts,
                    currentRoastData.avatarUrl
                );
                showToast('[ AVATAR_REGENERATED ]');
            }
        }

        function downloadImage() {
            const canvas = document.getElementById('roastCanvas');
            const link = document.createElement('a');
            link.download = `DESTROYX_${currentRoastData.username}_${Date.now()}.png`;
            link.href = canvas.toDataURL('image/png');
            link.click();
            showToast('[ IMAGE_DOWNLOADED ]');
        }

        // EXECUTE ANALYSIS
        async function execute() {
            const input = document.getElementById('username');
            const username = input.value.trim().replace(/[@]/g, '');
            
            if (!username) {
                alert('[ ERROR: NULL_USERNAME ]');
                input.focus();
                return;
            }

            // Mobile keyboard hide
            input.blur();

            // UI switch
            document.getElementById('input-section').classList.add('hidden');
            document.getElementById('terminal').classList.remove('hidden');
            
            // Scroll to terminal on mobile
            if (window.innerWidth < 768) {
                document.getElementById('terminal').scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
            
            const output = document.getElementById('terminal-output');
            const progress = document.getElementById('progress');
            output.innerHTML = '';

            const logs = [
                `$ init_autopsy --target=${username} --chain=base`,
                `[ OK ] Resolving X handle...`,
                `[ OK ] Fetching avatar from CDN...`,
                `[ OK ] Analyzing social graph patterns...`,
                `[ OK ] Loading roast database v9.1...`,
                isConnected ? `[ OK ] Verifying onchain holdings...` : `[ WARN ] Wallet not connected - limited analysis`,
                `[ OK ] Calculating brutal score algorithm...`,
                `[ OK ] Generating roast avatar...`,
                `[ OK ] Rendering destruction evidence...`
            ];

            for (let i = 0; i < logs.length; i++) {
                await sleep(300);
                const line = document.createElement('div');
                line.className = 'terminal-line';
                line.textContent = logs[i];
                output.appendChild(line);
                progress.style.width = ((i + 1) / logs.length * 100) + '%';
                
                // Auto scroll on mobile
                if (window.innerWidth < 768) {
                    output.scrollTop = output.scrollHeight;
                }
            }

            await sleep(400);
            showResults(username);
        }

        function showResults(username) {
            document.getElementById('terminal').classList.add('hidden');
            document.getElementById('results').classList.remove('hidden');

            // Scroll to results on mobile
            if (window.innerWidth < 768) {
                document.getElementById('results').scrollIntoView({ behavior: 'smooth', block: 'start' });
            }

            const tier = getTier(userBalance);
            
            // Generate score (seeded by username + block timestamp for uniqueness)
            const seed = username.split('').reduce((a, b) => a + b.charCodeAt(0), 0);
            const random = (n) => Math.abs((Math.sin(seed + n) * 10000) % 1);
            const score = (3 + random(0) * 7).toFixed(1); // 3.0 - 10.0

            // Profile
            const avatarUrl = `https://unavatar.io/twitter/${username}?fallback=false`;
            document.getElementById('avatar').src = avatarUrl;
            document.getElementById('avatar').onerror = function() {
                this.src = 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="80" height="80"%3E%3Crect width="80" height="80" fill="%23ccc"/%3E%3Ctext x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" font-family="monospace" font-size="30" fill="%23000"%3E?%3C/text%3E%3C/svg%3E';
            };
            document.getElementById('display-name').textContent = username.toUpperCase();
            document.getElementById('handle-display').textContent = `@${username}`;
            document.getElementById('score-num').textContent = score;
            
            // Badge
            const badgeDiv = document.getElementById('user-badge');
            badgeDiv.innerHTML = `<span class="badge-tier ${tier.class}">${tier.label}</span>`;

            // Onchain badge
            const onchainBadge = document.getElementById('onchain-badge');
            if (isConnected) {
                onchainBadge.innerHTML = `â›“ï¸ ONCHAIN VERIFIED | ${userBalance.toLocaleString()} $DESTROYX`;
            } else {
                onchainBadge.innerHTML = `âš ï¸ CONNECT WALLET FOR VERIFICATION`;
            }

            // Update verification status in results
            updateVerificationStatus();

            // Meter
            setTimeout(() => {
                document.getElementById('meter-fill').style.width = `${score * 10}%`;
                document.getElementById('meter-text').textContent = getBrutalLabel(score);
            }, 100);

            // Select roasts based on tier
            const roastCount = tier.perks.includes("Deep Analysis") ? 5 : 3;
            const selected = [];
            const usedIndices = new Set();
            
            for (let i = 0; i < roastCount; i++) {
                let idx;
                do {
                    idx = Math.floor(random(i) * roastDB.length);
                } while (usedIndices.has(idx));
                usedIndices.add(idx);
                selected.push(roastDB[idx]);
            }

            // Display roasts
            const container = document.getElementById('roast-container');
            container.innerHTML = selected.map((r, i) => 
                `<div class="roast-item">[${String(i+1).padStart(2,'0')}] ${r}</div>`
            ).join('');

            // Generate Image - FREE FEATURE
            currentRoastData = {
                username,
                score,
                tier: tier.label,
                roasts: selected,
                avatarUrl
            };
            
            // Delay image generation slightly for smooth transition
            setTimeout(() => {
                generateRoastImage(username, score, tier.label, selected, avatarUrl);
            }, 500);

            // Perks status
            const perkList = document.getElementById('perk-list');
            const allPerks = ["Basic Analysis", "Deep Analysis", "Onchain Verification", "Image Card", "Avatar Export", "Priority Queue", "Custom Message", "Onchain NFT Mint"];
            perkList.innerHTML = allPerks.map(perk => {
                const hasPerk = tier.perks.includes(perk);
                return `
                    <div class="perk-item ${hasPerk ? '' : 'perk-locked'}">
                        <div class="perk-check ${hasPerk ? 'perk-checked' : ''}">
                            ${hasPerk ? 'âœ“' : ''}
                        </div>
                        <span>${perk}</span>
                        ${!hasPerk ? '<span style="margin-left: auto; font-size: 0.7rem;">[LOCKED]</span>' : ''}
                    </div>
                `;
            }).join('');

            // Share text
            const shareText = `ðŸŽ¯ $DESTROYX ANALYSIS: @${username}

Brutal Score: ${score}/10
Tier: ${tier.label}
Status: ${getBrutalLabel(parseFloat(score))}
${isConnected ? `Verified: ${userBalance.toLocaleString()} $DESTROYX` : ''}

${selected.slice(0, 3).map((r, i) => `${i + 1}. ${r.substring(0, 50)}...`).join('\n')}

Generate your free roast avatar:
https://destroyx.vercel.app/

@arthousebase | #DESTROYX #BrutalScore #Base`;

            document.getElementById('share-buffer').value = shareText;
            document.getElementById('tweet-btn').href = 
                `https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}`;

            // Save to history
            currentResult = {
                username,
                score,
                tier: tier.label,
                verified: isConnected,
                timestamp: new Date().toISOString()
            };
            saveToHistory(currentResult);
        }

        function getBrutalLabel(score) {
            if (score >= 9) return "BEYOND SALVATION";
            if (score >= 7) return "TERMINAL CASE";
            if (score >= 5) return "CONCERNING";
            if (score >= 3) return "MILDLY DAMAGED";
            return "BARELY BREATHING";
        }

        // HISTORY (LOCALSTORAGE)
        function saveToHistory(result) {
            let history = JSON.parse(localStorage.getItem('destroxy_history') || '[]');
            history.unshift(result);
            if (history.length > 20) history = history.slice(0, 20);
            localStorage.setItem('destroxy_history', JSON.stringify(history));
            loadHistory();
            updateStats();
        }

        function loadHistory() {
            const history = JSON.parse(localStorage.getItem('destroxy_history') || '[]');
            const container = document.getElementById('history-list');
            
            if (history.length === 0) {
                container.innerHTML = '<div style="opacity: 0.5; font-size: 0.8rem;">No targets analyzed yet...</div>';
                document.getElementById('clear-btn').classList.add('hidden');
                return;
            }

            container.innerHTML = history.map(item => `
                <div class="history-item" onclick="loadFromHistory('${item.username}')">
                    <div class="history-handle">@${item.username}</div>
                    <div class="history-score">Score: ${item.score}/10 | ${item.tier} ${item.verified ? 'âœ“' : ''}</div>
                    <div class="history-date">${new Date(item.timestamp).toLocaleDateString()}</div>
                </div>
            `).join('');

            document.getElementById('clear-btn').classList.remove('hidden');
        }

        function loadFromHistory(username) {
            document.getElementById('username').value = username;
            execute();
        }

        function clearHistory() {
            if (confirm('Permanently clear destruction log?')) {
                localStorage.removeItem('destroxy_history');
                loadHistory();
                updateStats();
            }
        }

        function updateStats() {
            const history = JSON.parse(localStorage.getItem('destroxy_history') || '[]');
            document.getElementById('total-roasted').textContent = history.length;
            
            if (history.length > 0) {
                const avg = history.reduce((a, b) => a + parseFloat(b.score), 0) / history.length;
                document.getElementById('avg-brutality').textContent = avg.toFixed(1);
            }
        }

        function copyText() {
            const textarea = document.getElementById('share-buffer');
            textarea.select();
            
            try {
                navigator.clipboard.writeText(textarea.value).then(() => {
                    showToast('[ COPIED_TO_CLIPBOARD ]');
                });
            } catch (err) {
                document.execCommand('copy');
                showToast('[ COPIED_TO_CLIPBOARD ]');
            }
        }

        function showToast(message) {
            // Remove existing toast
            const existing = document.querySelector('.toast');
            if (existing) existing.remove();
            
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 2000);
        }

        function reset() {
            document.getElementById('username').value = '';
            document.getElementById('terminal-output').innerHTML = '';
            document.getElementById('progress').style.width = '0%';
            document.getElementById('results').classList.add('hidden');
            document.getElementById('terminal').classList.add('hidden');
            document.getElementById('input-section').classList.remove('hidden');
            
            // Reset canvas
            const canvas = document.getElementById('roastCanvas');
            const ctx = canvas.getContext('2d');
            ctx.fillStyle = '#ffffff';
            ctx.fillRect(0, 0, 800, 800);
            
            // Scroll back to top on mobile
            if (window.innerWidth < 768) {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
            
            currentResult = null;
            currentRoastData = null;
        }

        function sleep(ms) {
            return new Promise(r => setTimeout(r, ms));
        }

        // Enter key
        document.getElementById('username').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') execute();
        });

        // Prevent zoom on double tap for mobile
        let lastTouchEnd = 0;
        document.addEventListener('touchend', (e) => {
            const now = Date.now();
            if (now - lastTouchEnd <= 300) {
                e.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
    </script>

</body>
</html>
