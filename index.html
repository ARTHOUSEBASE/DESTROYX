<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DESTROYX | Account Autopsy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #ffffff;
            --text: #000000;
            --accent: #ff0000;
        }
        
        * { box-sizing: border-box; }
        
        body {
            background: var(--bg);
            color: var(--text);
            font-family: 'JetBrains Mono', monospace;
            margin: 0;
            min-height: 100vh;
        }

        .brutal {
            border: 2px solid black;
            box-shadow: 4px 4px 0px 0px black;
            transition: all 0.1s;
        }

        .brutal:hover {
            transform: translate(-2px, -2px);
            box-shadow: 6px 6px 0px 0px black;
        }

        .btn-primary {
            background: black;
            color: white;
            border: 2px solid black;
        }

        .btn-primary:hover {
            background: white;
            color: black;
        }

        .btn-share {
            background: #1DA1F2;
            color: white;
            border: 2px solid black;
            box-shadow: 4px 4px 0px 0px black;
        }

        .btn-share:hover {
            background: #0d8bd9;
        }

        .btn-download {
            background: #000000;
            color: white;
            border: 2px solid black;
            box-shadow: 4px 4px 0px 0px black;
        }

        .glitch {
            position: relative;
            display: inline-block;
        }

        .glitch::before,
        .glitch::after {
            content: attr(data-text);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .glitch::before {
            left: 2px;
            text-shadow: -2px 0 #00fff9;
            clip: rect(24px, 550px, 90px, 0);
            animation: glitch-anim-2 3s infinite linear alternate-reverse;
        }

        .glitch::after {
            left: -2px;
            text-shadow: -2px 0 #ff00c1;
            clip: rect(85px, 550px, 140px, 0);
            animation: glitch-anim 2.5s infinite linear alternate-reverse;
        }

        @keyframes glitch-anim {
            0% { clip: rect(10px, 9999px, 85px, 0); }
            20% { clip: rect(63px, 9999px, 130px, 0); }
            40% { clip: rect(25px, 9999px, 15px, 0); }
            60% { clip: rect(88px, 9999px, 95px, 0); }
            80% { clip: rect(42px, 9999px, 75px, 0); }
            100% { clip: rect(15px, 9999px, 135px, 0); }
        }

        @keyframes glitch-anim-2 {
            0% { clip: rect(65px, 9999px, 100px, 0); }
            20% { clip: rect(20px, 9999px, 45px, 0); }
            40% { clip: rect(90px, 9999px, 110px, 0); }
            60% { clip: rect(35px, 9999px, 60px, 0); }
            80% { clip: rect(75px, 9999px, 125px, 0); }
            100% { clip: rect(50px, 9999px, 80px, 0); }
        }

        .scan-line {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: rgba(0,0,0,0.3);
            animation: scan 2s linear infinite;
            pointer-events: none;
        }

        @keyframes scan {
            0% { top: 0%; }
            100% { top: 100%; }
        }

        .terminal {
            background: #f5f5f5;
            border: 2px solid black;
            position: relative;
            overflow: hidden;
        }

        .progress-bar {
            height: 20px;
            background: white;
            border: 2px solid black;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: black;
            width: 0%;
            transition: width 0.1s;
        }

        .metric-card {
            border: 2px solid black;
            background: white;
            position: relative;
        }

        .metric-card::before {
            content: '';
            position: absolute;
            top: 4px;
            left: 4px;
            right: -4px;
            bottom: -4px;
            background: black;
            z-index: -1;
        }

        .metric-card.featured {
            border: 3px solid #ff0000;
            background: #fff5f5;
        }

        .metric-card.featured::before {
            background: #ff0000;
        }

        .risk-high { color: #ff0000; }
        .risk-med { color: #ff8800; }

        .hidden { display: none !important; }

        .critique-box {
            border-left: 4px solid black;
            background: #fafafa;
            padding: 12px;
            margin-bottom: 8px;
        }

        .critique-box.featured {
            border-left: 4px solid #ff0000;
            background: #fff5f5;
        }

        .badge {
            display: inline-block;
            padding: 2px 6px;
            font-size: 10px;
            font-weight: bold;
            border: 1px solid black;
            margin-right: 4px;
        }

        .badge-red { background: #ff0000; color: white; }

        /* SHARE CARD STYLES - Optimized for image export */
        #share-card {
            width: 1200px;
            background: #ffffff;
            border: 4px solid #000000;
            padding: 40px;
            font-family: 'JetBrains Mono', monospace;
            position: absolute;
            left: -9999px;
            top: 0;
        }

        .share-header {
            border-bottom: 4px solid #000000;
            padding-bottom: 20px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .share-title {
            font-size: 48px;
            font-weight: 800;
            letter-spacing: -2px;
        }

        .share-avatar {
            width: 120px;
            height: 120px;
            border: 4px solid #000000;
            filter: grayscale(100%);
        }

        .share-handle {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .share-verdict {
            background: #000000;
            color: #ffffff;
            padding: 20px;
            font-size: 24px;
            line-height: 1.4;
            margin: 20px 0;
        }

        .share-crimes {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        .share-crime {
            border: 2px solid #000000;
            padding: 15px;
            background: #fff5f5;
        }

        .share-crime-title {
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 5px;
            color: #ff0000;
        }

        .share-crime-text {
            font-size: 14px;
            line-height: 1.3;
        }

        .share-footer {
            border-top: 4px solid #000000;
            padding-top: 20px;
            margin-top: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .share-qr {
            width: 100px;
            height: 100px;
            border: 2px solid #000000;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            text-align: center;
        }

        .share-branding {
            text-align: right;
        }

        .share-branding h3 {
            font-size: 32px;
            font-weight: 800;
            margin: 0;
        }

        .share-branding p {
            font-size: 14px;
            margin: 5px 0 0 0;
        }

        .stamp {
            position: absolute;
            top: 40px;
            right: 40px;
            border: 6px solid #ff0000;
            color: #ff0000;
            font-size: 72px;
            font-weight: 800;
            padding: 20px 40px;
            transform: rotate(-15deg);
            opacity: 0.9;
            letter-spacing: 10px;
        }

        ::-webkit-scrollbar {
            width: 10px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-left: 2px solid black;
        }
        ::-webkit-scrollbar-thumb {
            background: black;
        }

        #preview-container {
            max-width: 100%;
            overflow: auto;
            border: 2px solid black;
            margin: 20px 0;
        }

        #preview-container img {
            max-width: 100%;
            height: auto;
        }

        .loading-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.9);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 100;
            color: white;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid #333;
            border-top-color: #fff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="spinner mb-4"></div>
        <p class="font-mono">GENERATING EXECUTION CARD...</p>
    </div>

    <!-- Header -->
    <header class="border-b-2 border-black p-4 sticky top-0 bg-white z-50">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="w-3 h-3 bg-black animate-pulse"></div>
                <h1 class="text-2xl md:text-4xl font-bold glitch" data-text="DESTROYX">DESTROYX</h1>
                <span class="text-xs border border-black px-1 hidden sm:inline">AUTOPSY_V6.0</span>
            </div>
        </div>
    </header>

    <main class="max-w-4xl mx-auto p-4 md:p-8">

        <!-- Input -->
        <section id="input-section" class="mb-12">
            <div class="text-center mb-8">
                <h2 class="text-lg md:text-xl font-bold mb-2 uppercase tracking-widest">Public Execution</h2>
                <p class="text-sm opacity-70 max-w-lg mx-auto">
                    Generate shareable destruction card. 12-point forensic analysis. Viral humiliation.
                </p>
            </div>

            <div class="max-w-md mx-auto">
                <div class="flex gap-2 mb-4">
                    <div class="relative flex-grow">
                        <span class="absolute left-3 top-1/2 -translate-y-1/2 font-bold">@</span>
                        <input 
                            type="text" 
                            id="usernameInput" 
                            placeholder="vitalikbuterin" 
                            class="w-full pl-8 pr-4 py-3 border-2 border-black font-bold uppercase focus:outline-none focus:shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] transition-all"
                            onkeypress="if(event.key==='Enter') startAnalysis()"
                        >
                    </div>
                    <button 
                        onclick="startAnalysis()" 
                        class="btn-primary px-6 py-3 font-bold brutal whitespace-nowrap"
                    >
                        EXECUTE
                    </button>
                </div>
                <p id="error-msg" class="text-red-600 text-xs font-bold hidden text-center">[ERROR] VICTIM REQUIRED</p>
            </div>

            <!-- Support -->
            <div class="mt-8 text-center">
                <div class="inline-block border-2 border-black p-4 bg-gray-50">
                    <p class="text-xs font-bold mb-2 uppercase">Fuel The Machine</p>
                    <a 
                        href="https://app.uniswap.org/#/swap?outputCurrency=0x78305eF4299edb868d5fc0bb13B4AAa71cc63ba3&chain=ethereum" 
                        target="_blank"
                        class="inline-block px-6 py-3 font-bold brutal text-sm bg-red-600 text-white border-2 border-black"
                    >
                        BUY $DESTROY ‚Üó
                    </a>
                    <p class="text-[10px] mt-2 font-mono opacity-60 break-all">
                        0x78305eF4299edb868d5fc0bb13B4AAa71cc63ba3
                    </p>
                </div>
            </div>
        </section>

        <!-- Loading -->
        <section id="analysis-phase" class="hidden mb-8">
            <div class="terminal p-4 mb-4">
                <div class="scan-line"></div>
                <div class="flex justify-between mb-2 border-b-2 border-black pb-2">
                    <span class="font-bold text-sm">> PERFORMING_PUBLIC_EXECUTION</span>
                    <span id="progress-text" class="font-bold">0%</span>
                </div>
                <div id="terminal-logs" class="h-48 overflow-y-auto text-xs font-mono space-y-1"></div>
                <div class="progress-bar mt-4">
                    <div id="progress-fill" class="progress-fill"></div>
                </div>
            </div>
        </section>

        <!-- Results -->
        <section id="results-section" class="hidden space-y-6">
            
            <!-- Identity Header -->
            <div class="border-2 border-black bg-white brutal">
                <div class="flex flex-col md:flex-row">
                    <div class="w-full md:w-32 h-32 bg-gray-200 border-b-2 md:border-b-0 md:border-r-2 border-black flex items-center justify-center overflow-hidden">
                        <img id="result-avatar" src="" alt="Profile" class="w-full h-full object-cover grayscale">
                    </div>
                    <div class="p-4 flex-grow">
                        <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
                            <div>
                                <h2 id="result-name" class="text-xl font-bold uppercase">UNKNOWN</h2>
                                <p id="result-handle" class="text-sm opacity-60 font-mono">@unknown</p>
                            </div>
                            <div class="text-right">
                                <div class="text-xs uppercase font-bold mb-1">Social Value</div>
                                <div id="worth-score" class="text-3xl font-black risk-high">NEGATIVE</div>
                            </div>
                        </div>
                        <p id="result-bio" class="mt-3 text-sm border-l-2 border-black pl-3 italic opacity-70">
                            No personality detected.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Share Buttons -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <button onclick="generateShareCard()" class="btn-share px-6 py-4 font-bold brutal text-lg">
                    üì∏ GENERATE SHARE CARD
                </button>
                <button onclick="shareTextOnly()" class="btn-primary px-6 py-4 font-bold brutal text-lg">
                    üìù COPY TEXT ONLY
                </button>
            </div>

            <!-- Preview Container -->
            <div id="preview-wrapper" class="hidden">
                <h3 class="font-bold mb-2">PREVIEW:</h3>
                <div id="preview-container"></div>
                <div class="flex gap-2 mt-4">
                    <a id="download-link" download="destroxy-autopsy.png" class="btn-download px-6 py-3 font-bold brutal text-center flex-1 cursor-pointer">
                        üíæ DOWNLOAD IMAGE
                    </a>
                    <button onclick="shareToX()" class="btn-share px-6 py-3 font-bold brutal flex-1">
                        üöÄ POST TO X
                    </button>
                </div>
            </div>

            <!-- THE VERDICT -->
            <div class="bg-black text-white p-6 border-2 border-black">
                <h3 class="text-lg font-bold mb-4 flex items-center gap-2">
                    <span class="text-red-500 text-2xl">‚ö°</span> DEATH_SENTENCE
                </h3>
                <p id="verdict-text" class="text-xl leading-relaxed font-mono mb-4">
                    Subject under examination...
                </p>
                <div id="verdict-tags" class="flex flex-wrap gap-2"></div>
            </div>

            <!-- 12 CRITIQUE SECTIONS -->
            <div class="metric-card featured p-6">
                <h3 class="font-bold text-lg mb-4 border-b-2 border-red-600 pb-2 text-red-600">01. IDENTITY_DYSPHORIA</h3>
                <div id="critique-identity" class="space-y-3"></div>
            </div>

            <div class="metric-card p-6">
                <h3 class="font-bold text-lg mb-4 border-b-2 border-black pb-2">02. CONTENT_VOMIT_PROTOCOL</h3>
                <div id="critique-content" class="space-y-3"></div>
            </div>

            <div class="metric-card p-6">
                <h3 class="font-bold text-lg mb-4 border-b-2 border-black pb-2">03. ENGAGEMENT_PROSTITUTION</h3>
                <div id="critique-engagement" class="space-y-3"></div>
            </div>

            <div class="metric-card p-6">
                <h3 class="font-bold text-lg mb-4 border-b-2 border-black pb-2">04. REPLY_GUY_PATHOLOGY</h3>
                <div id="critique-reply" class="space-y-3"></div>
            </div>

            <div class="metric-card p-6">
                <h3 class="font-bold text-lg mb-4 border-b-2 border-black pb-2">05. NETWORK_MIRAGE</h3>
                <div id="critique-network" class="space-y-3"></div>
            </div>

            <div class="metric-card p-6">
                <h3 class="font-bold text-lg mb-4 border-b-2 border-black pb-2">06. TEMPORAL_DELUSION</h3>
                <div id="critique-time" class="space-y-3"></div>
            </div>

            <div class="metric-card p-6">
                <h3 class="font-bold text-lg mb-4 border-b-2 border-black pb-2">07. VOCABULARY_IMPOVERISHMENT</h3>
                <div id="critique-vocab" class="space-y-3"></div>
            </div>

            <div class="metric-card p-6">
                <h3 class="font-bold text-lg mb-4 border-b-2 border-black pb-2">08. AUTHENTICITY_BANKRUPTCY</h3>
                <div id="critique-authentic" class="space-y-3"></div>
            </div>

            <div class="metric-card p-6">
                <h3 class="font-bold text-lg mb-4 border-b-2 border-black pb-2">09. ATTENTION_EXTRACTION_ECONOMICS</h3>
                <div id="critique-economics" class="space-y-3"></div>
            </div>

            <div class="metric-card p-6">
                <h3 class="font-bold text-lg mb-4 border-b-2 border-black pb-2">10. MEME_LITERACY_FAILURE</h3>
                <div id="critique-meme" class="space-y-3"></div>
            </div>

            <div class="metric-card p-6">
                <h3 class="font-bold text-lg mb-4 border-b-2 border-black pb-2">11. PLATFORM_STOCKHOLM_SYNDROME</h3>
                <div id="critique-stockholm" class="space-y-3"></div>
            </div>

            <div class="metric-card featured p-6">
                <h3 class="font-bold text-lg mb-4 border-b-2 border-red-600 pb-2 text-red-600">12. EXISTENTIAL_VOID_SUMMARY</h3>
                <div id="critique-existential" class="space-y-3"></div>
            </div>

            <!-- Actions -->
            <div class="flex flex-col sm:flex-row gap-4 justify-center pt-4 border-t-2 border-black">
                <button onclick="resetAnalysis()" class="btn-primary px-8 py-3 font-bold brutal">
                    DESTROY_ANOTHER
                </button>
            </div>

        </section>

    </main>

    <!-- HIDDEN SHARE CARD TEMPLATE -->
    <div id="share-card">
        <div class="stamp">DESTROYED</div>
        
        <div class="share-header">
            <div>
                <h1 class="share-title">DESTROYX</h1>
                <p style="font-size: 18px; margin: 0;">ACCOUNT AUTOPSY REPORT</p>
            </div>
            <img id="share-avatar" src="" alt="" class="share-avatar">
        </div>

        <div class="share-handle" id="share-handle">@username</div>
        
        <div class="share-verdict" id="share-verdict">
            Verdict text here...
        </div>

        <div class="share-crimes" id="share-crimes">
            <!-- Dynamic crimes -->
        </div>

        <div style="margin: 20px 0; padding: 15px; border: 2px solid #000; background: #f5f5f5;">
            <p style="font-size: 16px; font-weight: bold; margin: 0 0 10px 0;">12-POINT FORENSIC FINDINGS:</p>
            <p style="font-size: 14px; line-height: 1.6; margin: 0;" id="share-findings">
                Identity Crisis ‚Ä¢ Content Vomit ‚Ä¢ Engagement Prostitution ‚Ä¢ Reply Guy Pathology ‚Ä¢ 
                Network Mirage ‚Ä¢ Temporal Waste ‚Ä¢ Vocabulary Poverty ‚Ä¢ Authenticity Bankruptcy ‚Ä¢ 
                Attention Extraction ‚Ä¢ Meme Failure ‚Ä¢ Stockholm Syndrome ‚Ä¢ Existential Void
            </p>
        </div>

        <div class="share-footer">
            <div class="share-qr">
                SCAN TO<br>DESTROY<br>SOMEONE
            </div>
            <div class="share-branding">
                <h3>DESTROYX</h3>
                <p>destroix.github.io</p>
                <p style="font-size: 12px; color: #ff0000; margin-top: 10px;">0x7830...63ba3</p>
            </div>
        </div>
    </div>

    <footer class="border-t-2 border-black p-4 mt-12 bg-white">
        <div class="max-w-4xl mx-auto text-center text-xs opacity-60">
            <p>DESTROYX PUBLIC EXECUTION SYSTEM ¬© 2024</p>
            <p class="mt-1">0x78305eF4299edb868d5fc0bb13B4AAa71cc63ba3</p>
        </div>
    </footer>

    <script>
        let currentData = {};
        let generatedImage = null;

        const critiqueDatabase = {
            identity: [
                "Numeric suffix suggests bot farm origin or identity crisis. Original handle likely suspended for being terrible.",
                "Underscore abuse detected: 'cool_name_123' format screams 'I wanted the good handle in 2009 but failed'.",
                "Protest too much: 'Real', 'Official', 'Verified' in handle means compensating for being neither.",
                "Crypto billboard username: Every tweet is a sales pitch you didn't ask for. Existence = exit liquidity.",
                "4-letter handle: Either early adopter with nothing left to say, or purchased stolen clout. Both pathetic."
            ],
            
            content: [
                "Threadboi archetype: Takes 20 tweets to say 2 sentences. Confuses length with having thoughts.",
                "Engagement farmer: 'GM', 'WAGMI', 'Drop your ETH' = digital panhandling. Zero value creation.",
                "Reply Guy Prime: Cannot create, only respond. Parasitic attachment to viral tweets for visibility.",
                "Motivational parasite: Repackages burnout as 'grindset'. Selling destruction as lifestyle.",
                "Crypto shaman: Every observation routed through token price. 'Coffee up 2%' mentality."
            ],
            
            engagement: [
                "Like-chasing: Deletes tweets under 10 likes. Self-worth determined by algorithm.",
                "Tag spam network: Mentions 15 accounts per post. Friendships built on notification harassment.",
                "Comment infestation: 'First', 'Early', 'Let's go' = auditory pollution. Contribution: zero.",
                "Ratio anxiety: Checks stats every 4 minutes. Validation addiction: clinical.",
                "Circular amplification: Same 50 accounts boost each other infinitely. Reach: illusion."
            ],
            
            reply: [
                "Reply velocity: 47 seconds average. Inhuman response time suggests automation or obsession.",
                "Copy-paste brigade: Same comment across 200 threads. Ctrl+C, Ctrl+V, Ctrl+Dignity.",
                "Contrarian for clout: Disagrees deliberately. Provokes for profit. Civil discourse: terminated.",
                "Thread hijacker: Derails conversations to make it about them. Main character syndrome: terminal.",
                "Reply guy hierarchy: Competes for 'top reply' status under celebrity tweets. Dignity: absent."
            ],
            
            network: [
                "Follower mirage: 50K followers, 12 likes per tweet. Audience: purchased. Influence: simulated.",
                "Bot analysis: 60-80% estimated non-human. Talking to mirrors and Russian click farms.",
                "Influencer cosplay: Acts like thought leader, thinks like affiliate marketer. Authority: fabricated.",
                "Network health: TERMINAL. Following this account statistically decreases timeline quality.",
                "Circular pact: Same accounts boost each other. Engagement: incestuous. Organic reach: zero."
            ],
            
            temporal: [
                "Time audit: 6+ hours daily on platform. Productivity: destroyed. Life: on hold. For digital scraps.",
                "Posting velocity: 47 tweets/day. Quality threshold: never met. Quantity over quality: always.",
                "Doomscrolling: Active 2AM-4AM. Sleep: ruined. Mental health: compromised. For infinite scroll.",
                "Archive analysis: 5 years, 50K tweets, zero achievements. Legacy: cautionary tale.",
                "Opportunity cost: Hours crafting tweets vs building something real. Regret: pending."
            ],
            
            vocab: [
                "Vocabulary: 200 unique words across 10K tweets. Communication range: toddler with WiFi.",
                "Emoji substitution: Uses üöÄ instead of explaining value. Literacy: hieroglyphics.",
                "Buzzword saturation: 'Synergy', 'Disruption', 'Web3' = verbal confetti. Meaning: evacuated.",
                "Abbreviation decay: 'ngmi', 'wagmi', 'fud' = linguistic collapse. Complex emotions in 4 letters.",
                "Quote tweet: 'This' + emoji = entire personality. Critical thinking: outsourced."
            ],
            
            authentic: [
                "Authenticity bankruptcy: Voice changes per trending topic. Chameleon with no base color.",
                "Personality rental: Adopts opinions for engagement. Beliefs: transactional. Spine: absent.",
                "Forced vulnerability: 'Opening up' for likes. Trauma: monetized. Connection: manufactured.",
                "Brand safety: Deletes controversial tweets. Courage: zero. Legacy: sanitized nothingness.",
                "Influencer accent: Uses 'space' and 'ecosystem' unnaturally. Performance: always on."
            ],
            
            economics: [
                "Attention extraction: You are the product being sold. Dignity: collateral damage.",
                "Platform sharecropping: Creates content for free, platform profits. Digital serfdom.",
                "Influencer complex: Selling courses on success never achieved. Pyramid scheme of clout.",
                "Sponsorship desperation: Promotes products never used. Integrity: negotiable. Price: low.",
                "Engagement ROI: 10K hours invested, $12.47 returned. Hustle culture: exposed."
            ],
            
            meme: [
                "Meme comprehension: Dead on arrival. Explains jokes in replies. Humor: surgically removed.",
                "Format abuse: Uses 2020 templates in 2024. Cultural awareness: zero. Relevance: expired.",
                "Reaction dependency: Cannot express emotion without GIF. Emotional intelligence: outsourced.",
                "Meme misinterpretation: Takes satire literally. Context: lost. Irony: undetected.",
                "Forced creation: 'How do you do, fellow kids' energy. Viral attempt #47: failed."
            ],
            
            stockholm: [
                "Platform Stockholm: Complains about X daily, posts 47 times daily. Abuse: acknowledged.",
                "Algorithmic submission: Posts at 'optimal times' like livestock. Autonomy: surrendered.",
                "Verification anxiety: Blue checkmark as personality substitute. Status: purchased.",
                "Update rage cycle: Hates every change, adapts immediately. Resistance: performative.",
                "Sharecropping loyalty: Defends platform that exploits them. Escape plan: none."
            ],
            
            existential: [
                "Existential audit: 10 years, 100K posts, zero impact. Legacy: digital dust.",
                "Mortality denial: Believes tweets immortalize. Reality: server costs. Forgotten: inevitable.",
                "Contribution analysis: Net subtractor from collective intelligence. Silence: service.",
                "Digital epitaph: 'Here lies [user]. Posted a lot. Said nothing. Left no mark.'",
                "Final assessment: Everything wrong with attention economy. Value: cautionary tale only."
            ]
        };

        const verdicts = [
            "This account is a monument to digital futility. Every tweet a cry for relevance in a void of achievement. Unfollow, block, forget.",
            "Advanced parasitic entity. Extracts attention without contributing value. Existence justified only by ad revenue to platform.",
            "Manufactured importance with zero foundation. Handle purchased, followers bought, opinions recycled. Originality: extinct.",
            "Quantity without quality. 50,000 tweets, zero thoughts worth reading. Digital equivalent of spam folder that learned to type.",
            "Everything wrong with social media, concentrated. Extraction economy participant, authenticity bankrupt, attention addicted."
        ];

        async function startAnalysis() {
            const username = document.getElementById('usernameInput').value.trim().replace('@', '');
            if (!username) {
                document.getElementById('error-msg').classList.remove('hidden');
                return;
            }
            
            document.getElementById('error-msg').classList.add('hidden');
            document.getElementById('input-section').classList.add('hidden');
            document.getElementById('analysis-phase').classList.remove('hidden');
            document.getElementById('results-section').classList.add('hidden');
            document.getElementById('preview-wrapper').classList.add('hidden');
            
            await performAutopsy(username);
        }

        async function performAutopsy(username) {
            const logs = document.getElementById('terminal-logs');
            const progressFill = document.getElementById('progress-fill');
            const progressText = document.getElementById('progress-text');
            
            logs.innerHTML = '';
            
            const addLog = (msg) => {
                const div = document.createElement('div');
                div.textContent = `> ${msg}`;
                div.className = 'opacity-80';
                logs.appendChild(div);
                logs.scrollTop = logs.scrollHeight;
            };

            const steps = [
                `Initializing public execution for @${username}...`,
                "Extracting avatar for evidence file...",
                "Analyzing handle linguistics...",
                "Scanning bio for compensation indicators...",
                "Detecting content archetype...",
                "Mapping engagement prostitution...",
                "Auditing reply guy behavior...",
                "Analyzing network mirage...",
                "Calculating temporal waste...",
                "Scanning vocabulary impoverishment...",
                "Testing authenticity bankruptcy...",
                "Analyzing attention extraction...",
                "Evaluating meme literacy...",
                "Diagnosing platform Stockholm...",
                "Compiling existential void...",
                "Preparing viral destruction card..."
            ];

            let progress = 0;
            
            for (let i = 0; i < steps.length; i++) {
                await new Promise(r => setTimeout(r, 200));
                addLog(steps[i]);
                progress = ((i + 1) / steps.length) * 100;
                progressFill.style.width = progress + '%';
                progressText.textContent = Math.floor(progress) + '%';
            }

            await new Promise(r => setTimeout(r, 400));
            showResults(username);
        }

        function showResults(username) {
            document.getElementById('analysis-phase').classList.add('hidden');
            document.getElementById('results-section').classList.remove('hidden');
            
            const seed = username.split('').reduce((a,b) => a + b.charCodeAt(0), 0);
            const random = (mod) => Math.abs((Math.sin(seed++) * 10000) % mod);
            
            const bioTemplates = [
                "Web3 enthusiast | Building the future | DYOR",
                "Crypto investor | Alpha caller | Not financial advice",
                "Founder | Investor | Helping others win",
                "GM ‚òÄÔ∏è | Coffee addict | Building in public",
                "Professional reply guy | Thoughts my own"
            ];
            const bio = bioTemplates[random(bioTemplates.length)];
            
            // Save current data
            currentData = {
                username,
                bio,
                avatar: `https://unavatar.io/twitter/${username}`,
                seed,
                random
            };
            
            // Basic Info
            document.getElementById('result-name').textContent = username.toUpperCase();
            document.getElementById('result-handle').textContent = '@' + username;
            document.getElementById('result-avatar').src = currentData.avatar;
            document.getElementById('result-bio').textContent = `"${bio}"`;
            
            // Worth Score
            const worthValue = random(100);
            const worthScore = document.getElementById('worth-score');
            worthScore.textContent = worthValue > 80 ? "PARASITIC" : worthValue > 50 ? "WORTHLESS" : "QUESTIONABLE";
            worthScore.className = "text-3xl font-black " + (worthValue > 50 ? "risk-high" : "risk-med");
            
            // Verdict
            const verdict = verdicts[random(verdicts.length)];
            document.getElementById('verdict-text').textContent = verdict;
            
            // Tags
            const tags = document.getElementById('verdict-tags');
            tags.innerHTML = '';
            const tagList = ["Attention Extractor", "Content Recycler", "Engagement Farmer", "Reply Guy Prime", "Network Parasite", "Authenticity Bankrupt"];
            tagList.sort(() => 0.5 - random(1)).slice(0, 4).forEach(tag => {
                const span = document.createElement('span');
                span.className = "badge badge-red";
                span.textContent = tag.toUpperCase();
                tags.appendChild(span);
            });
            
            // Populate all 12 sections
            populateCritique('critique-identity', critiqueDatabase.identity, random, true);
            populateCritique('critique-content', critiqueDatabase.content, random, false);
            populateCritique('critique-engagement', critiqueDatabase.engagement, random, false);
            populateCritique('critique-reply', critiqueDatabase.reply, random, false);
            populateCritique('critique-network', critiqueDatabase.network, random, false);
            populateCritique('critique-time', critiqueDatabase.temporal, random, false);
            populateCritique('critique-vocab', critiqueDatabase.vocabulary, random, false);
            populateCritique('critique-authentic', critiqueDatabase.authenticity, random, false);
            populateCritique('critique-economics', critiqueDatabase.economics, random, false);
            populateCritique('critique-meme', critiqueDatabase.meme, random, false);
            populateCritique('critique-stockholm', critiqueDatabase.stockholm, random, false);
            populateCritique('critique-existential', critiqueDatabase.existential, random, true);
            
            // Prepare share card data
            prepareShareCardData(username, verdict, bio, random);
            
            document.getElementById('results-section').scrollIntoView({ behavior: 'smooth' });
        }

        function populateCritique(id, critiques, random, featured) {
            const container = document.getElementById(id);
            container.innerHTML = '';
            const selected = critiques.sort(() => 0.5 - random(1)).slice(0, 2);
            
            selected.forEach(text => {
                const div = document.createElement('div');
                div.className = `critique-box ${featured ? 'featured' : ''}`;
                div.innerHTML = `<p class="text-sm leading-relaxed">${text}</p>`;
                container.appendChild(div);
            });
        }

        function prepareShareCardData(username, verdict, bio, random) {
            // Set share card content
            document.getElementById('share-handle').textContent = '@' + username;
            document.getElementById('share-verdict').textContent = verdict.substring(0, 200) + '...';
            document.getElementById('share-avatar').src = currentData.avatar;
            
            // Select top 4 crimes
            const crimes = [
                { title: "IDENTITY CRISIS", text: critiqueDatabase.identity[random(critiqueDatabase.identity.length)] },
                { title: "CONTENT VOMIT", text: critiqueDatabase.content[random(critiqueDatabase.content.length)] },
                { title: "ENGAGEMENT FARMING", text: critiqueDatabase.engagement[random(critiqueDatabase.engagement.length)] },
                { title: "NETWORK MIRAGE", text: critiqueDatabase.network[random(critiqueDatabase.network.length)] }
            ];
            
            const crimesContainer = document.getElementById('share-crimes');
            crimesContainer.innerHTML = '';
            crimes.forEach(crime => {
                crimesContainer.innerHTML += `
                    <div class="share-crime">
                        <div class="share-crime-title">${crime.title}</div>
                        <div class="share-crime-text">${crime.text.substring(0, 80)}...</div>
                    </div>
                `;
            });
        }

        async function generateShareCard() {
            const loading = document.getElementById('loading-overlay');
            loading.classList.remove('hidden');
            
            try {
                const card = document.getElementById('share-card');
                
                // Make sure image is loaded
                await new Promise((resolve) => {
                    const img = document.getElementById('share-avatar');
                    if (img.complete) resolve();
                    else img.onload = resolve;
                });
                
                // Generate canvas
                const canvas = await html2canvas(card, {
                    scale: 2,
                    useCORS: true,
                    allowTaint: true,
                    backgroundColor: '#ffffff',
                    width: 1200,
                    height: 675
                });
                
                generatedImage = canvas.toDataURL('image/png');
                
                // Show preview
                const previewContainer = document.getElementById('preview-container');
                previewContainer.innerHTML = `<img src="${generatedImage}" alt="Share Card">`;
                
                // Set download link
                const downloadLink = document.getElementById('download-link');
                downloadLink.href = generatedImage;
                downloadLink.download = `destroxy-${currentData.username}.png`;
                
                document.getElementById('preview-wrapper').classList.remove('hidden');
                document.getElementById('preview-wrapper').scrollIntoView({ behavior: 'smooth' });
                
            } catch (error) {
                console.error('Error generating card:', error);
                alert('Error generating image. Try again.');
            } finally {
                loading.classList.add('hidden');
            }
        }

        function shareTextOnly() {
            const text = `üö® AUTOPSY RESULTS: @${currentData.username} üö®

"${currentData.bio}"

üìä VERDICT: ${document.getElementById('verdict-text').textContent.substring(0, 100)}...

üî¥ 12-POINT DESTRUCTION:
‚Ä¢ Identity: Compensating hard
‚Ä¢ Content: Algorithmic desperation  
‚Ä¢ Engagement: Digital panhandling
‚Ä¢ Network: 60% bot followers
‚Ä¢ Time wasted: 1000+ hours
‚Ä¢ Vocabulary: 200 unique words

Get destroyed too üëá
destroix.github.io

#DESTROYX #AccountAutopsy @${currentData.username}`;
            
            navigator.clipboard.writeText(text).then(() => {
                alert('TEXT COPIED! PASTE INTO X/TWITTER.');
            });
        }

        function shareToX() {
            if (!generatedImage) {
                alert('Generate image first!');
                return;
            }
            
            // Download image first, then open X
            const link = document.createElement('a');
            link.download = `destroxy-${currentData.username}.png`;
            link.href = generatedImage;
            link.click();
            
            setTimeout(() => {
                const text = encodeURIComponent(`I just got publicly executed by DESTROYX üíÄ

@${currentData.username} autopsy results are BRUTAL.

Get destroyed too üëá`);
                window.open(`https://twitter.com/intent/tweet?text=${text}`, '_blank');
            }, 500);
        }

        function resetAnalysis() {
            document.getElementById('results-section').classList.add('hidden');
            document.getElementById('input-section').classList.remove('hidden');
            document.getElementById('preview-wrapper').classList.add('hidden');
            document.getElementById('usernameInput').value = '';
            generatedImage = null;
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        document.getElementById('usernameInput').focus();
    </script>

</body>
</html>
